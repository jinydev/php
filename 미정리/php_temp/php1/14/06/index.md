---
layout: default
title: PHP BOOK
subtitle: numphp

tree: /php
---

# 14.6 객체 접근

 

객체변수는 클래스를 통하여 인스턴스화된객체변수를 통하여 메서드나 프로퍼티를 접근 및 호출합니다.

 

생성된 객체변수의 메서드와 프로퍼티를호출하기 위해서는 **접근 연산자 ->**를사용합니다. **-> ****기호**는 객체 안에 있는 메서드와 프로퍼티를 접근하여 값을 설정하거나 호출할수 있습니다.

 

$객체변수**->**메서드;

 

$객체변수**->**프로퍼티;

 

기존 다른 언어에서는 클래스객체의 메서드 접근을 점(.)을 사용하기도 합니다. PHP 언어의경우에는 -> 기호를 사용하는 차이점이 있습니다.

 

 

**14.5.1****프로퍼티 접근******

프로퍼티에 값을 저장하거나 읽어오기위해서는 객체 접근이 필요합니다. 접근 기호를 통해 객체변수의 프로퍼티에 접근할 수 있습니다. 앞에서 설명한 것처럼 아래와 같이 작성하면 됩니다.

 

|문법|

$객체변수**->**프로퍼티;

 

하지만 프로퍼티 이름 앞에 $ 기호는 사용하지 않습니다.

 

 

위의 예제는 프로퍼티에 접근하여값을 읽어오거나 저장하는 간단한 표현입니다. 접근 기호 ->만넣어서 사용하면 됩니다.

 

**간접 접근******

위의 예와 접근 방식은 객체에직접 프로퍼티를 접근하는 방법입니다. 또한 프로퍼티를 접근할 때 프로퍼티명 앞에 $를 쓰지 않았습니다. 

 

만일 $를 포함하여 작성하면 프로퍼티명을 변수 값을 이용하여 호출하겠다는 의미입니다.$ 변수를 통해 간접적으로 프로퍼티에 접근하게 되는 것입니다.

 

$obj->$proertyName ;

 

간접 접근은 가변적으로 프로퍼티를선택하여 호출할 때 이용할 수 있습니다. 접근하려고 하는 프로퍼티는 $propertyName의값의 이름입니다.

 

 

**예제 파일 **class-04.php

 

**결과**

나이는 18입니다.

내 이름은 jiny입니다.

 

위의 예제는 프로퍼티 간접 접근에대한 실험입니다. 예에서 첫 번째 나이 부분은 직접 프로퍼티명을 입력하여 값을 설정하거나 읽어서 출력했습니다.

 

하지만 두 번째 이름은 변수에프로퍼티명을 설정한 후에 간접적으로 프로퍼티를 선택하여 설정, 출력을 했습니다.

 

 

**14.5.2****메서드 접근******

클래스의 함수인 메서드 접근은프로퍼티 접근 방식과 유사합니다. 객체변수 뒤에 **접근 연산자 ->**를 통해 메서드를 호출할 수 있습니다.

 

|문법|

$객체변수**->**메서드();

 

**예제 파일 **class-05.php

 

**결과**

hello world!

 

위의 예처럼 메서드를 단독으로호출할 수 있습니다. 또한 메서드의 반환값을 받아서 처리할 수도 있습니다.

 

 

**14.5.3 $this**

정의된 클래스의 메서드와 프로퍼티는인스턴스화를 통하여 생성된 객체변수에 직접 접근했습니다. 이러한 인스턴스화를 통한 객체의 생성과 접근은클래스 **외부**에서 메서드와 프로퍼티를 사용하는 대표적인 방법입니다.

  

하지만 클래스의 정의 **내부**에서 선언된 프로퍼티와 메서드에 접근하려면 어떻게 해야 할까요? 클래스가 객체지향적일 때 동일한 클래스 메서드에서 다른 메서드를 호출이 필요한 경우가 많이 발생할 것입니다.

 

이런 경우 클래스는 내부 접근을위해서 특별한 인스턴스 변수 $this를 제공합니다. **$this ****객체변수는 자기 자신의 클래스를 가르키는 셀프 변수입니다.**

 

**예제 파일 **class-06.php

 

**결과**

안녕하세요

 

위의 예제를 보면 클래스 내부의프로퍼티와 메서드는 $this를 통해 내부 접근이 가능합니다.

클래스 내의 show() 메서드는 getMessage() 메서드를 호출하고, getMessage() 메서드는 message 프로퍼티에 접근합니다.

 

특별한 $this 인스턴스 변수를 클래스 정의 내에서 사용하기 위해서는 반드시 클래스를 인스턴스화 형태로 객체를 생성해야합니다. 예를 들면 $this를 사용하기 위해서 다음과 같이클래스의 인스턴스화 작업을 해야만 합니다.

 

$obj = new JinyClass;

 

위처럼 $obj 객체변수가 생성되고 나서 내부에서 $this를 통해 내부메서드와 프로퍼티를 접근할 수 있는 것입니다. 

 

만일 정적 방식으로 클래스를사용할 때는 $this를 사용할 수 없습니다. 인스턴스를생성하지 않기 때문 입니다.

 

즉, $obj 인스턴스를 생성하게 되면 $this는 $obj를 가리키게 됩니다. 인스턴스를 생성하지 않으면 객체 자체가없기 때문에 $this 사용을 못하는 것입니다.  

 

 

**14.5.4****매서드체인******

메서드 체인이란 $this의 특성을 이용하여 클래스 메서드를 연결하여 사용하는 코딩 스타일을 말합니다.

 

PHP 클래스 응용 소스를 보면, 

 

$obj->setEnv()->loading();

 

위처럼 메서드 함수를 ->로 연결하여 사용하는 코드를 본적이 있을 것입니다.

 

이런 형태의 메서드 호출을 매서드체인이라고 합니다. 메서드 체인은 PHP 4.x에서 PHP 5.x 버전으로 업그레이드되면서 지원하게 되었습니다.

 

메서드 체인의 원리는 각각의메서드를 실행 후 $this 반환으로서 객체를 연결합니다.

 

$obj->setEnv()->loading();는 $obj->setEnv()를실행하고 $this를 반환합니다. $this는 $obj를 가리키기 때문에 다시  

 

$obj->loading();처럼 실행할 수 있습니다. 

 

 

 

이러한 메서드 체인 방법은 보다코드를 간결하게 만들고 프로그램을 개발하는 데 좀 더 직관적으로 유지보수가 쉬워지는 면도 있습니다. 

 

**예제 파일 **class-07.php

 

**결과**

안녕하세요. 저는 jiny입니다. 나이는 18이고요 남자입니다.

 

위의 예제를 보면 각각의 메서드는 $this 자기 자신의 객체를 반환합니다.

 

// 클래스를 선언합니다.

$objMembers = new members;

$objMembers->setUserName("jiny")->setUserAge(18)->setUserSex("남자")->show();

 

클래스를 선언하고 메서드 체인으로각각의 메서드를 연결, 호출합니다. 기존 메서드 호출 방식으로호출은 다음과 같습니다.

 

// 클래스를 선언합니다.

$objMembers = new members;

 

// 메서드 호출로 변수를 초기화합니다.

$objMembers->setUserName("jiny");

$objMembers->setUserAge("18");

$objMembers->setUserSex("남자");

 

$objMembers->show();

 

위의 전형적은 메서드 호출 사용법은메서드를 직접 하나씩 호출하여 프로퍼티 변수들을 초기화합니다. 세 개의 프로퍼티를 초기화하기 위해서소스상에서 세 줄을 할당하여 사용합니다.

 

메서드 체인 방식은 함수의 연속호출과 반환되는 값을 이용하기 때문에 직관적이고 한 줄에 모든 명령을 실행할 수 있습니다.

 

메서드 체인도 $this의 속성을 이용하기 때문에 사용 전에 반드시 클래스의 인스턴스를 생성 후에 사용해야 합니다.

 

**14.5.5 ****객체**** ****순회**

PHP 5.x 부터는 객체를 리스트처럼 순회하여 접근할 수 있습니다. 다음예제는객체의프로퍼티를foreach문을 사용하여 순회하여 접근합니다.

 

**예제****파일** class-08.php

 

**결과**

var1 => value 1 
var2 => value 2 
var3 => value 3

 

