---
layout: default
title: PHP BOOK
subtitle: numphp

tree: /php
---

# 14.8 매직 메서드

클래스는 매직 메서드라는 몇개의 미리 사전에 정의한 특수한 메서드가 있습니다. 클래스를 생성할 때 초기값을 설정하거나 오류 동작등 실행되는 특별한 메서드입니다.

 

 

**14.8.1****초기화******

__construct()메서드는 객체 생성 시 초기값 설정을 해주는 특수메서드입니다. 또는 생성자 메서드라고도 부릅니다.

 

$obj = new members();

 

다음과 같이 클래스 인스턴스를생성할 때 __construct() 메서드는 한 번 실행하게 됩니다.이 메서드명은 미리 정의된 이름입니다.

 

__construct()메서드를 사용하기 위해서는 클래스 내에 선언해야 합니다.

 

|문법|

 

클래스 상속의 경우 부모의 초기값매직 메서드는 자동으로 실행되지 않습니다. 이런 경우 별도의 부모 초기값 매직 메서드를 추가해야 합니다.

 

**예제 파일 **class-12.php

 

**결과**

BaseClass초기화

SubClass초기화

초기화 매개변수 a1 = 인자1

초기화 매개변수 a2 = 인자2

초기화 매개변수 a3 = 인자3

hello world! 

 

위의 예제는 상속받은 클래스의인스턴스를 생성합니다. 인스턴스 생성 시 초기 매개변수 값과 초기화 매직 메서드를 실행합니다.

 

 

**14.8.2****소멸자******

__construct()처럼 초기화 메서드가 있다고 한다면 반대로 소멸자매직 메서드가 존재합니다.

 

PHP 스크립트의 모든 소스가 실행 끝나고 나면__destruct() 메서드 함수가 실행됩니다.

|문법|

 

**예제 파일 **class-13.php****

 

**결과**

BaseClass초기화

hello world!

BaseClass소멸

 

위의 예제는 클래스의 인스턴스를생성과 스크립트 종료와 함께 __destruct() 매직 메서드가 호출됩니다.

 

 

**14.8.3****오류 호출******

매서드를 사용하기 위해서는 반드시클래스 내에 매서드 함수를 정의해야 합니다. 하지만 정의되지 않는 클래스를 사용하려고 하면 당연히 오류가발생할 것입니다. 공동 작업이나 소스가 커질수록 이러한 오류가 발생할 확률도 커집니다.

 

만일 클래스 내에서 존재하지않는 메서드를 호출할 때 오류를 발생하지 않고 __call() 메서드를 호출합니다. 

**예제 파일 **class-14.php

 

**결과**

오류: 정의되지 않는 메서드 show를a1, a2, a3호출했습니다.

 

위의 예제 에서는 없는 메서드를호출합니다. 없는 메서드를 호출하게 되면 대신에 __call() 매직메서드를 호출합니다. __call() 함수는 두 개의 인자를 받습니다.호출한 메서드명과 입력받은 파라미터 값을 배열로 전달합니다.

 

매직 메서드를 잘 이용하면 공동작업 시 잘못된 메서드의 호출로 인하여 발생할 수 있는 오류를 사전에 방지할 수 있습니다.

 

**14.8.4****객체의 문자열 변환**

__toString() 매직 매서드는 클래스가 문자열로 변환하여 처리될 때 동작합니다. 예로클래스객체를 echo $obj;처럼 출력할 때 __toString()메서드가동작합니다.

 

**예재****파일**class-15.php

 

결과

Hello

** **

**14.8.5****객체 함수 호출******

 

__invoke() 매직 메서드는 객체를 함수처럼 호출할 경우에 호출되는 메서드 입니다. $obj() 형태로호출될때실행됩니다.

 

예제파일) class-16.php

 

화면출력)

int(5) bool(true)

 

**14.8.6****객체 복제 호출******

 

__clone() 매직 메소드는 객체가 복제 되었을 때 실행회는 메서드입니다.

 

예제파일) class-17.php

 

화면출력)

clone object

 

 

**14.8.7__set(), __get(), __isset(), __unset()******

 

__set() 매직 메서드는 접근할 수 없는 프로퍼티에 값을 쓰고자 할 때 호출됩니다. __get()매직메서드는접근할수없는프로퍼티의값을읽을경우에호출됩니다. __isset() 매직 메서드는 접근할 수 없는 프로퍼티에 isset()함수나empty() 함수를 사용할 때 호출됩니다. __unset()매직매서드는접근할수없는프로퍼티를unset() 함수를 사용할 때 호출됩니다.

 

**예제****파일**class-18.php

 

**결과**

Setting 'name' to 'jiny' 
Is 'name' set? 
Is 'name' set? 
Unsetting 'name' 
Reading 'name'

 

 

**14.8.8****그 외 메서드******

이외에도 다음과 같은 매직 메서드가더 있습니다. 지면상 전부 다룰 수 없어서 보다 자세한 부분은 공식 사이트에서 확인 가능합니다.

 

●     __callStatic() : 정적 컨텍스트 내에서 접근 불가 메서드를 가져올 때 호출됩니다.

●     __sleep()

●     __wakeup()

●     __set_state() : [var_export()](http://php.net/manual/kr/function.var-export.php)에의해내보내진클래스를위해호출됩니다.

●     __debugInfo() : [var_dump()](http://php.net/manual/kr/function.var-dump.php)에의해덤프될때보여줄속성을가져올때호출됩니다.

 

 