I"<h1 id="console-cli-프로그래밍">console CLI 프로그래밍</h1>
<hr />
<p>콘솔에서 동작하는 cli 프로그램을 php로 작성할때 사용자의 데이터를 입력받아야 합니다.<br />
php는 streams을 통하여 input 과 output을 처리 할 수 있습니다.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$stdin</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">'php://stdin'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">);</span>
<span class="nv">$contents</span> <span class="o">=</span> <span class="nb">fread</span><span class="p">(</span><span class="nv">$stdin</span><span class="p">,</span> <span class="mi">1024</span><span class="p">);</span>
<span class="nb">fclose</span><span class="p">(</span><span class="nv">$stdin</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$contents</span><span class="p">;</span>
</code></pre></div></div>

<p>fopen으로 파일스트림을 열고, 스트림을 통하여 데이터를 입력 받습니다.
데이터 입력은 엔터가 입력될때 까지의 값을 최대 1024 까지 받을 수 있습니다.</p>

<p>만일 들어오는 값이 정수등 특수한 포맷으로 필터링이 필요한 경우 
fcanf 함수를 이용하여 할 수도 있습니다.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$stdin</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">'php://stdin'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">);</span>
<span class="nb">fscanf</span><span class="p">(</span><span class="nv">$stdin</span><span class="p">,</span> <span class="s2">"%d</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nv">$number</span><span class="p">);</span> <span class="c1">// reads number from STDIN</span>
<span class="k">echo</span> <span class="nv">$number</span><span class="p">;</span>
</code></pre></div></div>

:ET